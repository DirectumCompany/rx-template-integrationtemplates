# Шаблоны вариантов фильтрации входящих сообщений Diadoc
Шаблон с наиболее частыми примерами фильтрации документов, поступающих из Diadoc. Фильтрация документов происходит по признаку - формализованный, неформализованный.
В шаблоне реализованы функции: 
 - Поиск номера Заказа на покупку (Purchase order, PO) в поступившем документе;
 - Получение / создание документа из сервиса обмена с обработкой по типам: формализованный, неформализованный.

### Можно применять с минимальными доработками в следующих случаях
Заполнение поля PO карточек финансовых документов, поступивших из сервиса обмена:
1. Поле PO в карточках формализованных документов автоматически заполняется посредством парсинга (извлечением значения) поля Доп. информация, которое заполняется контрагентом в сервисе обмена.
2. Поле PO в карточках неформализованных документов автоматически заполняется значением поля комментарий, заполненного в сервисе обмена.

### Использование
Перенесите необходимые методы в ваш проект, константы и структуры из файлов ModuleConstants.cs, ModuleServerFunctions.cs и ModuleStructures.cs и адаптируйте для вашей задачи.

### Модификации
- В функции `ProcessFormalizedDocument()` и `ProcessNonformalizedDocument()` добавьте логику обработки формализованных и неформализованных документов, если это необходимо.
- Вы можете расширить логику функций по созданию финансовых документов: `CreateWaybillDocument()`, `CreateContractStatementDocument()`, `CreateUniversalTransferDocument()`, `CreateTaxInvoice()`
- Для фильтрации сообщений, поступающих из сервиса обмена, модифицируйте коробочную функцию `FilterLiteMessages()`. Пример можно посмотреть тут - https://github.com/DirectumCompany/rx-examples/blob/master/src/Packages/Sungero.Examples/Sungero.Examples.Server/Sungero.Exchange/ModuleServerFunctions.cs