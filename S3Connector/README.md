# Шаблон кода для работы с S3 хранилищем
Шаблон с методами получения файлов из хранилища, работающего по протоколу S3.

### Описание кейса, когда можно применить
1. Миграция данных с загрузкой тел документов из S3.
2. Интеграция с внешней системой с получением тела по ссылке из хранилища S3.
3. Получение тела документа из S3 по действию на карточке.

### Использование
1. Реализуйте справочник настроек для хранения настроек подключения к хранилищу S3 (реализована аутентификация через ключи доступа):
 - fsServiceURL - адрес FTPS-сервера.
 - fsAccessKey - ключ доступа.
 - fsSecretKey - ключ секрета.
 - fsBusketName - наименовании каталога, к которому выполнется доступ.
   В шаблоне эти данные выгружаются из таблицы Sungero_Docflow_Params. В рамках проекта рекомендуется создать справочник для хранения настроек подключения.
2. Подключить к прикладному модулю проекта внешние сборки AWSSDK/AWSSDK.Core.dll и AWSSDK/AWSSDK.S3.dll.
3. Скопировать методы из файла ModuleServerFunctions.cs в серверные функции прикладного модуля.
4. В рамках метода FSDownloadFile возвращается путь к телу документа, который выгружается во временный каталог ОС по умолчанию, рекомендуется адаптировать выгрузку к требованиям реализуемой задачи. 

### Особенности и ограничения
1. В шаблоне для хранения конфигурации подключения к S3 используется таблица DocflowParams. Вы можете изменить конфигурацию и место ее хранения.